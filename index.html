<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Battery Capacity Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 50px;
        }
        input, button {
            padding: 10px;
            margin: 10px 0;
        }
        label {
            display: block;
            margin: 10px 0;
        }
        .language-select {
            margin-bottom: 20px;
        }
        .language-select a {
            margin-right: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="language-select">
        <a href="#" onclick="setLanguage('en')">en</a>
        <a href="#" onclick="setLanguage('uk')">uk</a>
        <a href="#" onclick="setLanguage('ru')">ru</a>
    </div>
    <h1 id="title">Battery Capacity Calculator</h1>
    <form id="calcForm">
        <label for="power" id="powerLabel">Load Power (W):</label>
        <input type="number" id="power" required><br>
        
        <label for="voltage" id="voltageLabel">Battery Voltage (V):</label>
        <input type="number" id="voltage" required><br>
        
        <label for="dischargeTime" id="dischargeTimeLabel">Discharge Time (hours):</label>
        <input type="number" id="dischargeTime" required><br>
        
        <label for="chargeTime" id="chargeTimeLabel">Charge Time (hours):</label>
        <input type="number" id="chargeTime" required><br>
        
        <label>
            <input type="checkbox" id="efficiencyCheckbox" onclick="toggleEfficiency()"> <span id="efficiencyCheckboxText">Consider inverter efficiency (%)</span>
        </label>
        <label for="efficiency" id="efficiencyLabel" style="display: none;">
            <input type="number" id="efficiency" value="90">
        </label>
        
        <label>
            <input type="checkbox" id="remainingChargeCheckbox" onclick="toggleRemainingCharge()"> <span id="remainingChargeCheckboxText">Consider remaining charge (%)</span>
        </label>
        <label for="remainingCharge" id="remainingChargeLabel" style="display: none;">
            <input type="number" id="remainingCharge" value="20">
        </label>
        
        <button type="button" onclick="calculateCapacity()" id="calculateButton">Calculate Capacity and Charging Current</button>
    </form>
    <h2 id="result"></h2>
    <h2 id="chargeResult"></h2>

    <script>
        const resources = {
            en: {
                title: "Battery Capacity Calculator",
                powerLabel: "Load Power (W):",
                voltageLabel: "Battery Voltage (V):",
                dischargeTimeLabel: "Discharge Time (hours):",
                chargeTimeLabel: "Charge Time (hours):",
                efficiencyCheckbox: "Consider inverter efficiency (%)",
                remainingChargeCheckbox: "Consider remaining charge (%)",
                calculateButton: "Calculate Capacity and Charging Current",
                resultText: "Required battery capacity:",
                chargeResultText: "Charging current from 220V mains:"
            },
            ru: {
                title: "Калькулятор емкости аккумулятора",
                powerLabel: "Мощность нагрузки (Вт):",
                voltageLabel: "Напряжение аккумулятора (В):",
                dischargeTimeLabel: "Время разряда (ч):",
                chargeTimeLabel: "Время заряда (ч):",
                efficiencyCheckbox: "Учитывать КПД инвертора (%)",
                remainingChargeCheckbox: "Учитывать неснижаемый заряд (%)",
                calculateButton: "Рассчитать емкость и зарядный ток",
                resultText: "Необходимая емкость аккумулятора:",
                chargeResultText: "Зарядный ток от сети 220 В:"
            },
            uk: {
                title: "Калькулятор ємності акумулятора",
                powerLabel: "Потужність навантаження (Вт):",
                voltageLabel: "Напруга акумулятора (В):",
                dischargeTimeLabel: "Час розряду (години):",
                chargeTimeLabel: "Час заряду (години):",
                efficiencyCheckbox: "Враховувати ККД інвертора (%)",
                remainingChargeCheckbox: "Враховувати залишковий заряд (%)",
                calculateButton: "Розрахувати ємність і зарядний струм",
                resultText: "Необхідна ємність акумулятора:",
                chargeResultText: "Зарядний струм від мережі 220 В:"
            }
        };

        let currentLang = 'en';

        function loadLanguageResources() {
            document.getElementById('title').textContent = resources[currentLang].title;
            document.getElementById('powerLabel').textContent = resources[currentLang].powerLabel;
            document.getElementById('voltageLabel').textContent = resources[currentLang].voltageLabel;
            document.getElementById('dischargeTimeLabel').textContent = resources[currentLang].dischargeTimeLabel;
            document.getElementById('chargeTimeLabel').textContent = resources[currentLang].chargeTimeLabel;
            document.getElementById('efficiencyCheckboxText').textContent = resources[currentLang].efficiencyCheckbox;
            document.getElementById('remainingChargeCheckboxText').textContent = resources[currentLang].remainingChargeCheckbox;
            document.getElementById('calculateButton').textContent = resources[currentLang].calculateButton;
        }

        function setLanguage(lang) {
            currentLang = lang;
            loadLanguageResources();
        }

        function toggleEfficiency() {
            const efficiencyLabel = document.getElementById('efficiencyLabel');
            efficiencyLabel.style.display = efficiencyLabel.style.display === 'none' ? 'block' : 'none';
        }

        function toggleRemainingCharge() {
            const remainingChargeLabel = document.getElementById('remainingChargeLabel');
            remainingChargeLabel.style.display = remainingChargeLabel.style.display === 'none' ? 'block' : 'none';
        }

        function calculateCapacity() {
            const power = parseFloat(document.getElementById('power').value);
            const voltage = parseFloat(document.getElementById('voltage').value);
            const dischargeTime = parseFloat(document.getElementById('dischargeTime').value);
            const chargeTime = parseFloat(document.getElementById('chargeTime').value);
            
            let efficiency = 1;
            if (document.getElementById('efficiencyCheckbox').checked) {
                efficiency = parseFloat(document.getElementById('efficiency').value) / 100;
            }
            
            let remainingCharge = 0;
            if (document.getElementById('remainingChargeCheckbox').checked) {
                remainingCharge = parseFloat(document.getElementById('remainingCharge').value) / 100;
            }

            const current = power / voltage;
            const dischargeCapacity = current * dischargeTime;
            const fullCapacity = dischargeCapacity / (1 - remainingCharge);
            const realCapacity = fullCapacity / efficiency;

            document.getElementById('result').innerText = `${resources[currentLang].resultText} ${realCapacity.toFixed(2)} А·ч`;

            const chargeCurrent = realCapacity / chargeTime;
            const chargePower = chargeCurrent * voltage;
            const mainsCurrent = chargePower / 220;

            document.getElementById('chargeResult').innerText = `${resources[currentLang].chargeResultText} ${mainsCurrent.toFixed(2)} А`;
        }

        document.addEventListener('DOMContentLoaded', loadLanguageResources);
    </script>
</body>
</html>
